# プロジェクトロードマップ：現場スキャンWeb（仮）

## 1. プロジェクト概要
本プロジェクトは、スマートフォンのブラウザで動作する、インストール不要（PWA対応）なバーコードスキャン＆メール送信Webアプリの開発です。
「サーバー不要」「完全無料」「現場での使いやすさ」を追求します。

### 制約条件・基本方針
- **サーバー不要**: 静的なHTML/JS/CSSのみで構成し、GitHub Pagesなどで即座に公開可能。
- **PWA対応**: ホーム画面に追加することで、ネイティブアプリのような感覚で使用可能。
- **完全無料**: 外部APIキーや有料ライブラリを使用せず、オープンソースの `html5-qrcode` を活用。
- **現場仕様UI**: 手袋をしていても操作しやすい「デカボタン」と高コントラストなデザイン。

---

## 2. 開発フェーズ

### Phase 1: 基本構造とUIプロトタイプ
- `index.html` への基本レイアウト実装（Bootstrap 5 CDN利用）。
- 設定エリア（アコーディオン）とメイン操作エリアの作成。
- 現場仕様の「デカボタン」スタイルの適用。

### Phase 2: スキャン機能と音声フィードバック
- `html5-qrcode` の導入とカメラ起動処理。
- 連続スキャンロジックの実装。
- Web Audio APIによる「ピピッ」という読取音の実装。

### Phase 3: データ保存とリスト管理
- `localStorage` による設定（メールアドレス等）とスキャンデータの永続化。
- リスト表示、個別削除、重複読み取り防止機能の実装。

### Phase 4: 外部連携とPWA化
- `mailto:` によるメーラー起動とクリップボードコピー機能。
- `manifest.json` と `service-worker.js` の作成（PWA対応）。
- HTTPS環境での最終動作確認。

---

## 3. ファイル構成案（最小構成）
メンテナンス性を考慮しつつ、極力シンプルに構成します。

```text
/
├── index.html          # メイン画面・ロジック・スタイル（単一ファイル化も可能）
├── manifest.json       # PWA設定
├── sw.js               # Service Worker (オフライン対応用)
└── icons/              # アプリ用アイコン画像
    ├── icon-192.png
    └── icon-512.png
```

---

## 4. 技術的留意事項

### カメラ権限とHTTPS
- ブラウザのセキュリティ制限により、カメラ機能（`getUserMedia`）の使用には **HTTPS接続** が必須です。
- 開発時は `localhost` で動作しますが、実運用時はSSL対応のサーバー（GitHub Pages, Vercel, Firebase Hosting等）での公開が必要です。

### PWA化のメリット
- ホーム画面にアイコンを配置でき、ブラウザのツールバーを隠して全画面表示が可能です。
- オフライン時でもアプリの基本UIを表示させることができます。

### エラー対処方針
- **カメラ未許可**: 権限エラーを検知し、ブラウザの設定変更を促すメッセージを表示。
- **メーラー起動失敗**: `mailto:` が反応しない場合に備え、リストをクリップボードにコピーする機能を標準装備。
